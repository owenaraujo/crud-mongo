{"version":3,"sources":["webpack:///./src/views/ventas.vue?a3bb","webpack:///./src/components/404.vue?ae7b","webpack:///./src/views/ventas.vue?91d7","webpack:///src/views/ventas.vue","webpack:///./src/views/ventas.vue?21d3","webpack:///./src/views/ventas.vue","webpack:///./src/components/404.vue?00c4","webpack:///src/components/404.vue","webpack:///./src/components/404.vue?5b4f","webpack:///./src/components/404.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","usuario","roles","name","staticClass","class","visible","staticStyle","attrs","on","$event","_m","_v","_s","store","length","model","value","callback","$$v","expression","dark","_f","total","infoEmpresa","dolar","_l","productos","index","key","producto","precio","resCantidad","cantidad","sumCantidad","btnEnviar","enviar","deleteStore","busqueda","nombre","toLowerCase","indexOf","codigo","venta","saveStore","_id","alerta","_e","staticRenderFns","components","Err","created","getProductos","data","fields","validated","computed","reduce","methods","filter","console","log","text","map","element","id_producto","id","item","self","deleteFromStore","pul","obtener","verifyStock","param","save","alert","$toastr","success","message","options","error","warning","component"],"mappings":"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","file":"js/chunk-1c50929b.8b06fede.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ventas.vue?vue&type=style&index=0&id=7a35dc6d&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./404.vue?vue&type=style&index=0&id=3c02ecef&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.usuario.roles.name !== 'usuario')?_c('div',[_c('div',{staticClass:\"c-hand\",class:_vm.visible ? null : 'collapsed',staticStyle:{\"position\":\"fixed\",\"z-index\":\"1500\",\"right\":\"70px\",\"bottom\":\"10px\"},attrs:{\"aria-expanded\":_vm.visible ? 'true' : 'false',\"aria-controls\":\"collapse-4\"},on:{\"click\":function($event){_vm.visible = !_vm.visible}}},[_vm._m(0),_c('div',{staticClass:\" iconC red-alert text-white\"},[_vm._v(_vm._s(_vm.store.length))])]),_c('div',{staticStyle:{\"position\":\"fixed\",\"z-index\":\"1000\",\"right\":\"10px\",\"bottom\":\"65px\",\"width\":\"340px\"}},[_c('b-collapse',{staticClass:\"mt-2\",attrs:{\"id\":\"collapse-4\"},model:{value:(_vm.visible),callback:function ($$v) {_vm.visible=$$v},expression:\"visible\"}},[_c('div',{staticClass:\" card \",class:{ 'dark-secondary': _vm.dark }},[_c('div',{staticClass:\"card-header d-flex\",class:{ 'color-secondary': _vm.dark }},[_c('p',{staticClass:\"text-left w-50\"},[_vm._v(\" total \"+_vm._s(_vm._f(\"formatNumber\")((_vm.total * _vm.infoEmpresa.dolar)))+\" \")]),_c('p',{staticClass:\"text-right w-50\"},[_vm._v(\"total \"+_vm._s(_vm.total))])]),_c('div',{staticClass:\"card-body list-scroll scrollbar-light-blue\"},_vm._l((_vm.store),function(productos,index){return _c('div',{key:index},[_c('div',[_vm._v(\" \"+_vm._s(productos.producto)+\" \"),_c('div',[_vm._v(_vm._s(productos.precio)+\" $ c/u\")]),_c('div',[_c('div',{staticClass:\"btn red-alert text-white\",on:{\"click\":function($event){return _vm.resCantidad(index, (\"\" + (productos.id_producto)))}}},[_c('i',{staticClass:\"fas fa-minus\"})]),_vm._v(\" \"+_vm._s(productos.cantidad)+\" \"),_c('div',{staticClass:\"btn yellow-danger text-white\",on:{\"click\":function($event){return _vm.sumCantidad(index, (\"\" + (productos.id_producto)))}}},[_c('i',{staticClass:\"fas fa-plus\"})]),_c('p',{staticClass:\"text-right\"},[_vm._v(\" total: \"+_vm._s(productos.cantidad * productos.precio)+\" \")])])])])}),0),_c('div',{staticClass:\"card-footer d-flex\"},[_c('button',{staticClass:\"btn color-primary mr-2 text-white c-hand w-50\",attrs:{\"disabled\":_vm.btnEnviar},on:{\"click\":_vm.enviar}},[_c('i',{staticClass:\"fas fa-check\"})]),_c('div',{staticClass:\"btn color-danger mr-2 text-white c-hand w-50\",on:{\"click\":_vm.deleteStore}},[_c('i',{staticClass:\"fas fa-trash\"})])])])])],1),_c('b-row',[_c('b-col',{staticClass:\"mt-2\",attrs:{\"md\":\"3\",\"sm\":\"2\"}},[_c('b-form-input',{staticClass:\"w-75\",attrs:{\"id\":\"filter-input\",\"type\":\"search\",\"placeholder\":\"busqueda\"},model:{value:(_vm.busqueda),callback:function ($$v) {_vm.busqueda=$$v},expression:\"busqueda\"}})],1)],1),_c('b-row',_vm._l((_vm.productos),function(producto,index){return _c('div',{key:index},[(\n            producto.nombre.toLowerCase().indexOf(_vm.busqueda.toLowerCase()) !==\n              -1 ||\n              producto.codigo\n                .toLowerCase()\n                .indexOf(_vm.busqueda.toLowerCase()) !== -1\n          )?_c('b-col',{attrs:{\"sm\":\"12\",\"md\":\"12\"}},[_c('div',{staticClass:\"card  mt-2\",class:{'dark-secondary': _vm.dark}},[_c('div',{staticClass:\"card-header\",class:{'color-secondary': _vm.dark}},[_vm._v(\" \"+_vm._s(producto.nombre)+\" \")]),_c('div',{staticClass:\"card-body\"},[_vm._v(\" disponible: \"+_vm._s(producto.cantidad)+\" \"),_c('div',{staticClass:\"text-center\"},[_c('b-button',{staticClass:\"btn color-primary mr-2 text-white c-hand w-50\",attrs:{\"disabled\":producto.venta > producto.cantidad ||\n                      producto.cantidad === 0},on:{\"click\":function($event){return _vm.saveStore(index ,producto._id)}}},[_vm._v(\" + \")]),_c('div',[_vm._v(\" \"+_vm._s(producto.alerta)+\" \")])],1)])])]):_vm._e()],1)}),0)],1):_vm._e(),_c('Err')],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"btn color-primary text-white\"},[_c('i',{staticClass:\"fas fa-shopping-cart\"})])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div v-if=\"usuario.roles.name !== 'usuario'\">\r\n      <div\r\n        style=\"position: fixed; z-index: 1500; right: 70px; bottom: 10px\"\r\n        @click=\"visible = !visible\"\r\n        class=\"c-hand\"\r\n        :class=\"visible ? null : 'collapsed'\"\r\n        :aria-expanded=\"visible ? 'true' : 'false'\"\r\n        aria-controls=\"collapse-4\"\r\n      >\r\n        <div class=\"btn color-primary text-white\">\r\n          <i class=\"fas fa-shopping-cart\"></i>\r\n        </div>\r\n        <div class=\" iconC red-alert text-white\">{{ store.length }}</div>\r\n      </div>\r\n      <div\r\n        style=\"position: fixed; z-index: 1000; right: 10px ; bottom: 65px; width: 340px\"\r\n      >\r\n        <b-collapse id=\"collapse-4\" v-model=\"visible\" class=\"mt-2\">\r\n          <div class=\" card \" :class=\"{ 'dark-secondary': dark }\">\r\n            <div\r\n              class=\"card-header d-flex\"\r\n              :class=\"{ 'color-secondary': dark }\"\r\n            >\r\n              <p class=\"text-left w-50\">\r\n                total {{ (total * infoEmpresa.dolar) | formatNumber }}\r\n              </p>\r\n              <p class=\"text-right w-50\">total {{ total }}</p>\r\n            </div>\r\n            <div class=\"card-body list-scroll scrollbar-light-blue\">\r\n              <div v-for=\"(productos, index) in store\" :key=\"index\">\r\n                <div>\r\n                  {{ productos.producto }}\r\n                  <div>{{ productos.precio }} $ c/u</div>\r\n                  <div>\r\n                    <div\r\n                      class=\"btn red-alert text-white\"\r\n                      v-on:click=\"\r\n                        resCantidad(index, `${productos.id_producto}`)\r\n                      \"\r\n                    >\r\n                      <i class=\"fas fa-minus\"></i>\r\n                    </div>\r\n                    {{ productos.cantidad }}\r\n                    <div\r\n                      class=\"btn yellow-danger text-white\"\r\n                      v-on:click=\"\r\n                        sumCantidad(index, `${productos.id_producto}`)\r\n                      \"\r\n                    >\r\n                      <i class=\"fas fa-plus\"></i>\r\n                    </div>\r\n                    <p class=\"text-right\">\r\n                      total: {{ productos.cantidad * productos.precio }}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n            <div class=\"card-footer d-flex\">\r\n              <button\r\n              :disabled=\"btnEnviar \"\r\n                class=\"btn color-primary mr-2 text-white c-hand w-50\"\r\n                @click=\"enviar\"\r\n              >\r\n                <i class=\"fas fa-check\"></i>\r\n              </button>\r\n              <div\r\n                @click=\"deleteStore\"\r\n                class=\"btn color-danger mr-2 text-white c-hand w-50\"\r\n              >\r\n                <i class=\"fas fa-trash\"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </b-collapse>\r\n      </div>\r\n      <b-row>\r\n        <b-col md=\"3\" class=\"mt-2\" sm=\"2\">\r\n          <b-form-input\r\n            class=\"w-75\"\r\n            id=\"filter-input\"\r\n            v-model=\"busqueda\"\r\n            type=\"search\"\r\n            placeholder=\"busqueda\"\r\n          ></b-form-input>\r\n        </b-col>\r\n      </b-row>\r\n\r\n      <b-row>\r\n        <div v-for=\"(producto, index) in productos\" v-bind:key=\"index\">\r\n          <b-col\r\n            sm=\"12\"\r\n            md=\"12\"\r\n            v-if=\"\r\n              producto.nombre.toLowerCase().indexOf(busqueda.toLowerCase()) !==\r\n                -1 ||\r\n                producto.codigo\r\n                  .toLowerCase()\r\n                  .indexOf(busqueda.toLowerCase()) !== -1\r\n            \"\r\n          >\r\n            <div class=\"card  mt-2\"  :class=\"{'dark-secondary': dark}\">\r\n              <div class=\"card-header\" :class=\"{'color-secondary': dark}\">\r\n                {{ producto.nombre }}\r\n              </div>\r\n              <div class=\"card-body\">\r\n                disponible: {{ producto.cantidad }}\r\n                \r\n                <div class=\"text-center\">\r\n                  <b-button\r\n                    class=\"btn color-primary mr-2 text-white c-hand w-50\"\r\n                    @click=\"saveStore(index ,producto._id)\"\r\n                    :disabled=\"\r\n                      producto.venta > producto.cantidad ||\r\n                        producto.cantidad === 0\r\n                    \"\r\n                  >\r\n                    +\r\n                  </b-button>\r\n                  <div>\r\n                    {{ producto.alerta }}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </b-col>\r\n        </div>\r\n      </b-row>\r\n    </div>\r\n    <Err />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapMutations } from \"vuex\";\r\nimport numeral from \"numeral\";\r\nimport axios from \"axios\";\r\nimport Vue from \"vue\";\r\nimport Err from \"../components/404.vue\";\r\nVue.filter(\"formatNumber\", function(value) {\r\n  return numeral(value).format(\"0,0\"); // displaying other groupings/separators is possible, look at the docs\r\n});\r\nexport default {\r\n  components: {\r\n    Err,\r\n  },\r\n  created() {\r\n    this.getProductos();\r\n  },\r\n  name: \"Links\",\r\n  data() {\r\n    return {\r\n      btnEnviar: false,\r\n      fields: [\"producto\", \"opciones\"],\r\n      visible: false,\r\n      busqueda: \"\",\r\n      validated: 1,\r\n\r\n      store: [],\r\n      productos: [\r\n        {\r\n          id: 1,\r\n          nombre: \"mayonesa\",\r\n          precio: 3,\r\n          cantidad: 7,\r\n          alerta: null,\r\n          stock: 3,\r\n        },\r\n        {\r\n          id: 2,\r\n          nombre: \"harina\",\r\n          precio: 1.4,\r\n          cantidad: 8,\r\n          alerta: null,\r\n          stock: 3,\r\n        },\r\n        { id: 3, nombre: \"arroz\", precio: 1.2, cantidad: 4 },\r\n        {\r\n          id: 4,\r\n          nombre: \"mantequilla\",\r\n          precio: 2.5,\r\n          cantidad: 5,\r\n          alerta: null,\r\n          stock: 3,\r\n        },\r\n        {\r\n          id: 5,\r\n          nombre: \"esto\",\r\n          precio: 1,\r\n          cantidad: 6,\r\n          alerta: null,\r\n          stock: 3,\r\n        },\r\n        {\r\n          id: 6,\r\n          nombre: \"aquello\",\r\n          precio: 1,\r\n          cantidad: 9,\r\n          alerta: null,\r\n          stock: 0,\r\n        },\r\n        {\r\n          id: 7,\r\n          nombre: \"asd\",\r\n          precio: 3,\r\n          cantidad: 0,\r\n          alerta: null,\r\n          stock: 3,\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\r\n      \"options\",\r\n      \"dark\",\r\n      \"server\",\r\n      \"infoEmpresa\",\r\n      \"usuario\",\r\n      \"token\",\r\n    ]),\r\n    total() {\r\n      return this.store.reduce(\r\n        (sum, item) => sum + parseFloat(item.cantidad * item.precio),\r\n        0\r\n      );\r\n    },\r\n  },\r\n  methods: {\r\n    \r\n    filter() {\r\n      const text = this.id;\r\n      console.log(text);\r\n    },\r\n    sumCantidad(index, id) {\r\n      this.store.map((element) => {\r\n        if (element.id_producto == id) {\r\n          this.productos.map(function(item) {\r\n            if (item._id === element.id_producto) {\r\n              if (item.cantidad == 0) {\r\n                return;\r\n              }\r\n              item.cantidad--;\r\n\r\n              element.cantidad++;\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    resCantidad(index, id) {\r\n      const self = this;\r\n      this.store.map((element) => {\r\n        if (element.id_producto === id) {\r\n          this.productos.map(function(item) {\r\n            if (item._id === element.id_producto) {\r\n              if (element.cantidad == 0) {\r\n                return;\r\n              }\r\n              item.cantidad++;\r\n              element.cantidad--;\r\n              if (element.cantidad == 0) {\r\n                self.deleteFromStore(index);\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    deleteFromStore(index) {\r\n      console.log(index);\r\n      this.store.pul(index);\r\n    },\r\n    ...mapMutations([\r\n      \"getStorage\",\r\n      \"getLogin\",\r\n      \"cambiarLogin\",\r\n      \"saveToken\",\r\n      \"getUser\",\r\n      \"getInfoEmpresa\",\r\n    ]),\r\n    async getProductos() {\r\n      const { data } = await axios.get(`${this.server}/productos/get`);\r\n      this.productos = data;\r\n    },\r\n    deleteStore() {\r\n      this.store = [];\r\n      this.getProductos();\r\n    },\r\n    obtener() {\r\n      return this.store.reduce(\r\n        (sum, item) => sum + parseFloat(item.cantidad * item.precio),\r\n        0\r\n      );\r\n    },\r\n    async enviar() {\r\n      if (this.store.length == 0) {\r\n        return;\r\n      }\r\n      this.btnEnviar = true\r\n      const value = this.obtener();\r\n      const valores = {\r\n        dolar: this.infoEmpresa.dolar,\r\n        total: value,\r\n        productos: this.store,\r\n      };\r\n      const { data } = await axios.post(`${this.server}/ventas`, valores, {\r\n        headers: { xtoken: this.token },\r\n      });\r\n\r\n      this.alert(data);\r\n      this.btnEnviar = false\r\n\r\n      if (data.value === true) {\r\n        this.store = [];\r\n      }\r\n    },\r\n    verifyStock(index) {\r\n      for (let i = 0; i < this.productos.length; i++) {\r\n        const element = this.productos[index];\r\n        let param = element.cantidad - element.stock;\r\n        if (element.cantidad < element.venta) {\r\n          element.alerta = \"stock no disponible\";\r\n        }\r\n        if ((param <= element.venta) & (element.venta < element.cantidad)) {\r\n          element.alerta = \"limite de stock\";\r\n        }\r\n        if (param > element.venta) {\r\n          element.alerta = null;\r\n        }\r\n\r\n        if (element.cantidad == element.venta) element.alerta = \"stock en 0\";\r\n      }\r\n    },\r\n    save() {\r\n      var index = null;\r\n      let param = index.cantidad - index.stock;\r\n\r\n      if (index.cantidad < index.venta) {\r\n        index.alerta = \"stock no disponible\";\r\n      }\r\n      if ((param <= index.venta) & (index.venta < index.cantidad)) {\r\n        index.alerta = \"limite de stock\";\r\n      }\r\n      if (param > index.venta) {\r\n        index.alerta = null;\r\n      }\r\n\r\n      if (index.cantidad == index.venta) index.alerta = \"stock en 0\";\r\n    },\r\n\r\n    saveStore(index, id) {\r\n      this.productos.map(element=>{\r\nif (element._id === id) {\r\n  element.venta= 1\r\n        if (element.venta == 0 || element.venta == null) return;\r\n        if (element.cantidad - element.stock < element.venta) {\r\n          element.alerta = \"limite de stock\";\r\n        } else {\r\n          element.cantidad = element.cantidad - element.venta;\r\n          let data = this.store.map(function(item) {\r\n            if (item.id_producto === element._id) {\r\n              const ventaActual = parseFloat(element.venta);\r\n              const ventaAnterior = parseFloat(item.cantidad);\r\n              //element.cantidad = element.cantidad - ventaActual\r\n              item.cantidad = ventaActual + ventaAnterior;\r\n              return true;\r\n            } else {\r\n              return false;\r\n            }\r\n          });\r\n          if (data.indexOf(true) !== -1) {\r\n            \r\n            element.alerta = null;\r\n\r\n            return;\r\n          }\r\n          this.store.push({\r\n            producto: element.nombre,\r\n            cantidad: element.venta,\r\n            precio: element.precio,\r\n            id_producto: element._id,\r\n          });\r\n\r\n          element.venta = null;\r\n          element.alerta = null;\r\n        }\r\n}\r\n      })\r\n      \r\n    },\r\n    alert(data) {\r\n      if (data.value === true) {\r\n        this.$toastr.success(data.message, \"configuracion\", this.options);\r\n      }\r\n      if (data.value === false) {\r\n        this.$toastr.error(data.message, \"configuracion\", this.options);\r\n      }\r\n      if (data.value === null) {\r\n        this.$toastr.warning(data.message, \"configuracion\", this.options);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.border-white{\r\n  border:0.2px solid white;\r\npadding: 5px;\r\n}\r\n\r\n.iconC {\r\n  top: -5px;\r\n  width: 23px;\r\n  left: 31px;\r\n  height: 23px;\r\n  position: absolute;\r\n  border-radius: 10rem;\r\n  text-align: center;\r\n\r\n  align-content: center;\r\n}\r\n\r\n.card {\r\n  max-height: 80vh;\r\n}\r\n.btn {\r\n  border-radius: 10rem;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ventas.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ventas.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ventas.vue?vue&type=template&id=7a35dc6d&scoped=true&\"\nimport script from \"./ventas.vue?vue&type=script&lang=js&\"\nexport * from \"./ventas.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ventas.vue?vue&type=style&index=0&id=7a35dc6d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a35dc6d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.usuario.roles.name ==='usuario')?_c('div',[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('div',{staticClass:\"error-template\"},[_c('h1',[_vm._v(\" Oops!\")]),_c('h2',[_vm._v(\" 403 no tienes los permisos para acceder\")]),_c('div',{staticClass:\"error-details\"},[_vm._v(\" lo sentimos, no puedes acceder a esta pagina \")]),_c('div',{staticClass:\"error-actions\"},[_c('router-link',{staticClass:\"btn btn-primary btn-lg\",attrs:{\"to\":\"/\"}},[_c('span',{staticClass:\"glyphicon glyphicon-home\"}),_vm._v(\" ir al inicio\")])],1)])])])])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<div v-if=\"usuario.roles.name ==='usuario'\">\r\n    <div class=\"container\">\r\n    <div class=\"row\">\r\n        <div class=\"col-md-12\">\r\n            <div class=\"error-template\">\r\n                <h1>\r\n                    Oops!</h1>\r\n                <h2>\r\n                    403 no tienes los permisos para acceder</h2>\r\n                <div class=\"error-details\">\r\n                    lo sentimos, no puedes acceder a esta pagina\r\n                </div>\r\n                <div class=\"error-actions\">\r\n                    <router-link to=\"/\" class=\"btn btn-primary btn-lg\"><span class=\"glyphicon glyphicon-home\"></span>\r\n                        ir al inicio</router-link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport{mapState, mapMutations} from 'vuex'\r\n\r\nexport default {\r\n  name: 'Err',\r\n data() {\r\n   return {\r\n    \r\n   }\r\n },computed:{\r\n    ...mapState(['usuario','dark', 'infoEmpresa'])\r\n  },\r\n  methods: {\r\n    ...mapMutations(['cambiar'])\r\n  },\r\n}\r\n\r\n\r\n\r\n\r\n</script>\r\n<style scoped>\r\n.error-template {padding: 40px 15px;text-align: center;}\r\n.error-actions {margin-top:15px;margin-bottom:15px;}\r\n.error-actions .btn { margin-right:10px; }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./404.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./404.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./404.vue?vue&type=template&id=3c02ecef&scoped=true&\"\nimport script from \"./404.vue?vue&type=script&lang=js&\"\nexport * from \"./404.vue?vue&type=script&lang=js&\"\nimport style0 from \"./404.vue?vue&type=style&index=0&id=3c02ecef&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3c02ecef\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}