(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c50929b"],{"33aa":function(t,a,e){"use strict";e("4eed")},4927:function(t,a,e){},"4dce":function(t,a,e){"use strict";e("4927")},"4eed":function(t,a,e){},"6a6c":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",["usuario"!==t.usuario.roles.name?e("div",[e("div",{staticClass:"c-hand",class:t.visible?null:"collapsed",staticStyle:{position:"fixed","z-index":"1500",right:"70px",bottom:"10px"},attrs:{"aria-expanded":t.visible?"true":"false","aria-controls":"collapse-4"},on:{click:function(a){t.visible=!t.visible}}},[t._m(0),e("div",{staticClass:" iconC red-alert text-white"},[t._v(t._s(t.store.length))])]),e("div",{staticStyle:{position:"fixed","z-index":"1000",right:"10px",bottom:"65px",width:"340px"}},[e("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-4"},model:{value:t.visible,callback:function(a){t.visible=a},expression:"visible"}},[e("div",{staticClass:" card ",class:{"dark-secondary":t.dark}},[e("div",{staticClass:"card-header d-flex",class:{"color-secondary":t.dark}},[e("p",{staticClass:"text-left w-50"},[t._v(" total "+t._s(t._f("formatNumber")(t.total*t.infoEmpresa.dolar))+" ")]),e("p",{staticClass:"text-right w-50"},[t._v("total "+t._s(t.total))])]),e("div",{staticClass:"card-body list-scroll scrollbar-light-blue"},t._l(t.store,(function(a,i){return e("div",{key:i},[e("div",[t._v(" "+t._s(a.producto)+" "),e("div",[t._v(t._s(a.precio)+" $ c/u")]),e("div",[e("div",{staticClass:"btn red-alert text-white",on:{click:function(e){return t.resCantidad(i,""+a.id_producto)}}},[e("i",{staticClass:"fas fa-minus"})]),t._v(" "+t._s(a.cantidad)+" "),e("div",{staticClass:"btn yellow-danger text-white",on:{click:function(e){return t.sumCantidad(i,""+a.id_producto)}}},[e("i",{staticClass:"fas fa-plus"})]),e("p",{staticClass:"text-right"},[t._v(" total: "+t._s(a.cantidad*a.precio)+" ")])])])])})),0),e("div",{staticClass:"card-footer d-flex"},[e("button",{staticClass:"btn color-primary mr-2 text-white c-hand w-50",attrs:{disabled:t.btnEnviar},on:{click:t.enviar}},[e("i",{staticClass:"fas fa-check"})]),e("div",{staticClass:"btn color-danger mr-2 text-white c-hand w-50",on:{click:t.deleteStore}},[e("i",{staticClass:"fas fa-trash"})])])])])],1),e("b-row",[e("b-col",{staticClass:"mt-2",attrs:{md:"3",sm:"2"}},[e("b-form-input",{staticClass:"w-75",attrs:{id:"filter-input",type:"search",placeholder:"busqueda"},model:{value:t.busqueda,callback:function(a){t.busqueda=a},expression:"busqueda"}})],1)],1),e("b-row",t._l(t.productos,(function(a,i){return e("div",{key:i},[-1!==a.nombre.toLowerCase().indexOf(t.busqueda.toLowerCase())||-1!==a.codigo.toLowerCase().indexOf(t.busqueda.toLowerCase())?e("b-col",{attrs:{sm:"12",md:"12"}},[e("div",{staticClass:"card  mt-2",class:{"dark-secondary":t.dark}},[e("div",{staticClass:"card-header",class:{"color-secondary":t.dark}},[t._v(" "+t._s(a.nombre)+" ")]),e("div",{staticClass:"card-body"},[t._v(" disponible: "+t._s(a.cantidad)+" "),e("div",{staticClass:"text-center"},[e("b-button",{staticClass:"btn color-primary mr-2 text-white c-hand w-50",attrs:{disabled:a.venta>a.cantidad||0===a.cantidad},on:{click:function(e){return t.saveStore(i,a._id)}}},[t._v(" + ")]),e("div",[t._v(" "+t._s(a.alerta)+" ")])],1)])])]):t._e()],1)})),0)],1):t._e(),e("Err")],1)},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"btn color-primary text-white"},[e("i",{staticClass:"fas fa-shopping-cart"})])}],s=e("1da1"),n=e("5530"),o=(e("96cf"),e("4de4"),e("d81d"),e("2f62")),c=e("6612"),d=e.n(c),l=e("bc3a"),u=e.n(l),v=e("2b0e"),p=e("7746");v["default"].filter("formatNumber",(function(t){return d()(t).format("0,0")}));var f={components:{Err:p["a"]},created:function(){this.getProductos()},name:"Links",data:function(){return{btnEnviar:!1,fields:["producto","opciones"],visible:!1,busqueda:"",validated:1,store:[],productos:[{id:1,nombre:"mayonesa",precio:3,cantidad:7,alerta:null,stock:3},{id:2,nombre:"harina",precio:1.4,cantidad:8,alerta:null,stock:3},{id:3,nombre:"arroz",precio:1.2,cantidad:4},{id:4,nombre:"mantequilla",precio:2.5,cantidad:5,alerta:null,stock:3},{id:5,nombre:"esto",precio:1,cantidad:6,alerta:null,stock:3},{id:6,nombre:"aquello",precio:1,cantidad:9,alerta:null,stock:0},{id:7,nombre:"asd",precio:3,cantidad:0,alerta:null,stock:3}]}},computed:Object(n["a"])(Object(n["a"])({},Object(o["c"])(["options","dark","server","infoEmpresa","usuario","token"])),{},{total:function(){return this.store.reduce((function(t,a){return t+parseFloat(a.cantidad*a.precio)}),0)}}),methods:Object(n["a"])(Object(n["a"])({filter:function(){var t=this.id;console.log(t)},sumCantidad:function(t,a){var e=this;this.store.map((function(t){t.id_producto==a&&e.productos.map((function(a){if(a._id===t.id_producto){if(0==a.cantidad)return;a.cantidad--,t.cantidad++}}))}))},resCantidad:function(t,a){var e=this,i=this;this.store.map((function(r){r.id_producto===a&&e.productos.map((function(a){if(a._id===r.id_producto){if(0==r.cantidad)return;a.cantidad++,r.cantidad--,0==r.cantidad&&i.deleteFromStore(t)}}))}))},deleteFromStore:function(t){console.log(t),this.store.pul(t)}},Object(o["b"])(["getStorage","getLogin","cambiarLogin","saveToken","getUser","getInfoEmpresa"])),{},{getProductos:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var e,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,u.a.get("".concat(t.server,"/productos/get"));case 2:e=a.sent,i=e.data,t.productos=i;case 5:case"end":return a.stop()}}),a)})))()},deleteStore:function(){this.store=[],this.getProductos()},obtener:function(){return this.store.reduce((function(t,a){return t+parseFloat(a.cantidad*a.precio)}),0)},enviar:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var e,i,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0!=t.store.length){a.next=2;break}return a.abrupt("return");case 2:return t.btnEnviar=!0,e=t.obtener(),i={dolar:t.infoEmpresa.dolar,total:e,productos:t.store},a.next=7,u.a.post("".concat(t.server,"/ventas"),i,{headers:{xtoken:t.token}});case 7:r=a.sent,s=r.data,t.alert(s),t.btnEnviar=!1,!0===s.value&&(t.store=[]);case 12:case"end":return a.stop()}}),a)})))()},verifyStock:function(t){for(var a=0;a<this.productos.length;a++){var e=this.productos[t],i=e.cantidad-e.stock;e.cantidad<e.venta&&(e.alerta="stock no disponible"),i<=e.venta&e.venta<e.cantidad&&(e.alerta="limite de stock"),i>e.venta&&(e.alerta=null),e.cantidad==e.venta&&(e.alerta="stock en 0")}},save:function(){var t=null,a=t.cantidad-t.stock;t.cantidad<t.venta&&(t.alerta="stock no disponible"),a<=t.venta&t.venta<t.cantidad&&(t.alerta="limite de stock"),a>t.venta&&(t.alerta=null),t.cantidad==t.venta&&(t.alerta="stock en 0")},saveStore:function(t,a){var e=this;this.productos.map((function(t){if(t._id===a){if(t.venta=1,0==t.venta||null==t.venta)return;if(t.cantidad-t.stock<t.venta)t.alerta="limite de stock";else{t.cantidad=t.cantidad-t.venta;var i=e.store.map((function(a){if(a.id_producto===t._id){var e=parseFloat(t.venta),i=parseFloat(a.cantidad);return a.cantidad=e+i,!0}return!1}));if(-1!==i.indexOf(!0))return void(t.alerta=null);e.store.push({producto:t.nombre,cantidad:t.venta,precio:t.precio,id_producto:t._id}),t.venta=null,t.alerta=null}}}))},alert:function(t){!0===t.value&&this.$toastr.success(t.message,"configuracion",this.options),!1===t.value&&this.$toastr.error(t.message,"configuracion",this.options),null===t.value&&this.$toastr.warning(t.message,"configuracion",this.options)}})},b=f,m=(e("33aa"),e("2877")),h=Object(m["a"])(b,i,r,!1,null,"7a35dc6d",null);a["default"]=h.exports},7746:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return"usuario"===t.usuario.roles.name?e("div",[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"error-template"},[e("h1",[t._v(" Oops!")]),e("h2",[t._v(" 403 no tienes los permisos para acceder")]),e("div",{staticClass:"error-details"},[t._v(" lo sentimos, no puedes acceder a esta pagina ")]),e("div",{staticClass:"error-actions"},[e("router-link",{staticClass:"btn btn-primary btn-lg",attrs:{to:"/"}},[e("span",{staticClass:"glyphicon glyphicon-home"}),t._v(" ir al inicio")])],1)])])])])]):t._e()},r=[],s=e("5530"),n=e("2f62"),o={name:"Err",data:function(){return{}},computed:Object(s["a"])({},Object(n["c"])(["usuario","dark","infoEmpresa"])),methods:Object(s["a"])({},Object(n["b"])(["cambiar"]))},c=o,d=(e("4dce"),e("2877")),l=Object(d["a"])(c,i,r,!1,null,"3c02ecef",null);a["a"]=l.exports}}]);
//# sourceMappingURL=chunk-1c50929b.8b06fede.js.map